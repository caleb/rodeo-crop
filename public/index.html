<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <script src="javascripts/rodeo-crop.js"></script>

  <style>
    body, html { height: 100%; margin: 0; padding: 0; }
    #container {
      background-color: black;
      height: 100%;
      width: 100%;
    }
  </style>
</head>
<body>

  <form action="#">
    <input type="text" name="x">, <input type="text" name="y"> â€” <input type="text" name="w">&times;<input type="text" name="h">
    <button>update!</button>
  </form>

  <div id="container">
    <!-- <img src="http://placekitten.com/980/768"> -->
  </div>

  <script>
    var container = document.getElementById("container");
    var w = window.getComputedStyle(container).getPropertyValue("width")
    var h = window.getComputedStyle(container).getPropertyValue("height")
    cropper = new RodeoCrop.Cropper("#container", {
      width: parseInt(w, 10),
      height: parseInt(h, 10),
      imageSource: '/Costa%20Rican%20Frog.jpg',
      onCropFrameChanged: function(frame) {
        var x = document.querySelector('[name=x]');
        var y = document.querySelector('[name=y]');
        var w = document.querySelector('[name=w]');
        var h = document.querySelector('[name=h]');

        x.value = "" + frame.x;
        y.value = "" + frame.y;
        w.value = "" + frame.width;
        h.value = "" + frame.height;
      }
    });

    button = document.querySelector('button')
    button.addEventListener('click', function(e) {
      e.preventDefault();

      var x = document.querySelector('[name=x]');
      var y = document.querySelector('[name=y]');
      var w = document.querySelector('[name=w]');
      var h = document.querySelector('[name=h]');

      var cropFrame = cropper.setCropFrame({
        x: parseFloat(x.value, 10),
        y: parseFloat(y.value, 10),
        width: parseFloat(w.value, 10),
        height: parseFloat(h.value, 10)
      });

      x.value = cropFrame.x;
      y.value = cropFrame.y;
      w.value = cropFrame.width;
      h.value = cropFrame.height;
    });
  </script>
</body>
</html>
